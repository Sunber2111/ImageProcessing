{"ast":null,"code":"const cv = require('./opencv');\n\nconst {\n  Canvas,\n  createCanvas,\n  Image,\n  ImageData,\n  loadImage,\n  createImageData\n} = require('canvas');\n\nconst color2Gray = async url => {\n  const image = await loadImage(url);\n  const src = cv.imread(image);\n  const mydata = createImageData(new Uint8ClampedArray(src.data8S), src.rows, src.cols);\n  console.log(mydata);\n  const canvas = createCanvas(src.rows, src.cols);\n  let ctx = canvas.getContext('2d');\n  const img = new Image();\n\n  img.onload = () => ctx.drawImage(img, 0, 0);\n\n  img.onerror = err => {\n    throw err;\n  };\n\n  img.src = mydata;\n  cv.imshow(canvas, src);\n  console.log(canvas);\n};\n\nmodule.exports = {\n  color2Gray\n};","map":{"version":3,"sources":["D:/XLA/project/node_modules/opencv/index.js"],"names":["cv","require","Canvas","createCanvas","Image","ImageData","loadImage","createImageData","color2Gray","url","image","src","imread","mydata","Uint8ClampedArray","data8S","rows","cols","console","log","canvas","ctx","getContext","img","onload","drawImage","onerror","err","imshow","module","exports"],"mappings":"AAAA,MAAMA,EAAE,GAAGC,OAAO,CAAC,UAAD,CAAlB;;AACA,MAAM;AAAEC,EAAAA,MAAF;AAAUC,EAAAA,YAAV;AAAwBC,EAAAA,KAAxB;AAA+BC,EAAAA,SAA/B;AAA0CC,EAAAA,SAA1C;AAAqDC,EAAAA;AAArD,IAAyEN,OAAO,CAAC,QAAD,CAAtF;;AAEA,MAAMO,UAAU,GAAG,MAAMC,GAAN,IAAa;AAE5B,QAAMC,KAAK,GAAG,MAAMJ,SAAS,CAACG,GAAD,CAA7B;AAEA,QAAME,GAAG,GAAGX,EAAE,CAACY,MAAH,CAAUF,KAAV,CAAZ;AAEA,QAAMG,MAAM,GAAGN,eAAe,CAAC,IAAIO,iBAAJ,CAAsBH,GAAG,CAACI,MAA1B,CAAD,EAAoCJ,GAAG,CAACK,IAAxC,EAA8CL,GAAG,CAACM,IAAlD,CAA9B;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAYN,MAAZ;AAEA,QAAMO,MAAM,GAAGjB,YAAY,CAACQ,GAAG,CAACK,IAAL,EAAWL,GAAG,CAACM,IAAf,CAA3B;AAEA,MAAII,GAAG,GAAGD,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAV;AAEA,QAAMC,GAAG,GAAG,IAAInB,KAAJ,EAAZ;;AAEAmB,EAAAA,GAAG,CAACC,MAAJ,GAAa,MAAMH,GAAG,CAACI,SAAJ,CAAcF,GAAd,EAAmB,CAAnB,EAAsB,CAAtB,CAAnB;;AAEAA,EAAAA,GAAG,CAACG,OAAJ,GAAcC,GAAG,IAAI;AAAE,UAAMA,GAAN;AAAW,GAAlC;;AAEAJ,EAAAA,GAAG,CAACZ,GAAJ,GAAUE,MAAV;AAEAb,EAAAA,EAAE,CAAC4B,MAAH,CAAUR,MAAV,EAAkBT,GAAlB;AAEAO,EAAAA,OAAO,CAACC,GAAR,CAAYC,MAAZ;AAGH,CA3BD;;AA6BAS,MAAM,CAACC,OAAP,GAAiB;AACbtB,EAAAA;AADa,CAAjB","sourcesContent":["const cv = require('./opencv')\r\nconst { Canvas, createCanvas, Image, ImageData, loadImage, createImageData } = require('canvas')\r\n\r\nconst color2Gray = async url => {\r\n\r\n    const image = await loadImage(url)\r\n\r\n    const src = cv.imread(image)\r\n\r\n    const mydata = createImageData(new Uint8ClampedArray(src.data8S), src.rows, src.cols)\r\n\r\n    console.log(mydata)\r\n\r\n    const canvas = createCanvas(src.rows, src.cols)\r\n\r\n    let ctx = canvas.getContext('2d')\r\n\r\n    const img = new Image()\r\n\r\n    img.onload = () => ctx.drawImage(img, 0, 0)\r\n\r\n    img.onerror = err => { throw err }\r\n\r\n    img.src = mydata\r\n\r\n    cv.imshow(canvas, src)\r\n\r\n    console.log(canvas)\r\n\r\n\r\n}\r\n\r\nmodule.exports = {\r\n    color2Gray\r\n}"]},"metadata":{},"sourceType":"script"}